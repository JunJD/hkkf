"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[756],{317:function(t,e,n){n.d(e,{Z:function(){return o}});n(331);var r=n(6059),i=n.n(r),a=(n(2791),n(6871)),c=n(184);var o=function(t){var e=t.children,n=t.onLeftClick,r=t.className,o=t.rightContent,s=(0,a.s0)();return(0,c.jsx)(i(),{className:["navBar",r||""].join(" "),mode:"light",icon:(0,c.jsx)("i",{className:"iconfont icon-back"}),onLeftClick:n||function(){return s(-1)},rightContent:o,children:e})}},8848:function(t,e,n){n.r(e),n.d(e,{default:function(){return N}});var r=n(1413),i=n(5861),a=(n(6925),n(3826)),c=n.n(a),o=n(5671),s=n(3144),l=n(136),u=n(9388),d=n(7757),f=n.n(d),h=n(2791),y=n(6871),p=n(4569),v=n.n(p),m=n(5455),x=n(5633),C=n(317),g=n(184),j=function(t){var e,n={};return t.forEach((function(t){var e=t.short.substr(0,1);n[e]?n[e].push(t):n[e]=[t]})),e=Object.keys(n).sort(),{cityList:n,cityIndex:e}},k=function(t){switch(t){case"#":return"\u5f53\u524d\u5b9a\u4f4d";case"hot":return"\u70ed\u95e8\u57ce\u5e02";default:return t.toUpperCase()}},w=["\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733"],b=function(t){(0,l.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).changeCity=function(t){var e=t.label,n=t.value,i=r.props.navigate;-1!==w.indexOf(e)?(localStorage.setItem("hkzf_city",JSON.stringify({label:e,value:n})),i(-1)):c().info("\u8be5\u57ce\u5e02\u6682\u65e0\u623f\u6e90\u6570\u636e",1,null,!1)},r.rowRenderer=function(t){var e=t.key,n=t.index,i=(t.isScrolling,t.isVisible,t.style),a=r.state,c=a.cityIndex,o=a.cityList,s=c[n];return(0,g.jsxs)("div",{style:i,className:"city",children:[(0,g.jsx)("div",{className:"title",children:k(s)}),o[s].map((function(t){return(0,g.jsx)("div",{className:"name",onClick:function(){r.changeCity(t)},children:t.label},t.value)}))]},e)},r.getRowHeight=function(t){var e=t.index,n=r.state,i=n.cityIndex;return 36+50*n.cityList[i[e]].length},r.renderCityIndex=function(){return r.state.cityIndex.map((function(t,e){return(0,g.jsx)("li",{className:"city-index-item",onClick:function(){r.cityListComponent.current.scrollToRow(e)},children:(0,g.jsx)("span",{className:r.state.activeIndex===e?"index-active":"",children:"hot"===t?"\u70ed":t.toUpperCase()})},t)}))},r.onRowsRendered=function(t){var e=t.startIndex;e!==r.state.activeIndex&&r.setState((function(){return{activeIndex:e}}))},r.state={cityList:{},cityIndex:[],activeIndex:0},r.cityListComponent=h.createRef(),r}return(0,s.Z)(n,[{key:"getCityList",value:function(){var t=(0,i.Z)(f().mark((function t(){var e,n,r,i,a,c;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v().get("http://localhost:8080/area/city",{params:{level:1}});case 2:return e=t.sent,n=j(e.data.body),r=n.cityList,i=n.cityIndex,t.next=6,v().get("http://localhost:8080/area/hot");case 6:return a=t.sent,r.hot=a.data.body,i.unshift("hot"),t.next=11,(0,x.sx)();case 11:c=t.sent,r["#"]=[c],i.unshift("#"),this.setState((function(){return{cityList:r,cityIndex:i}}));case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return(0,g.jsxs)("div",{className:"citylist",children:[(0,g.jsx)(C.Z,{children:"\u57ce\u5e02\u9009\u62e9"}),(0,g.jsx)(m.qj,{children:function(e){var n=e.height,r=e.width;return(0,g.jsx)(m.aV,{width:r,height:n,rowCount:t.state.cityIndex.length,rowHeight:t.getRowHeight,rowRenderer:t.rowRenderer,onRowsRendered:t.onRowsRendered,ref:t.cityListComponent,scrollToAlignment:"start"})}}),(0,g.jsx)("ul",{className:"city-index",children:this.renderCityIndex()})]})}},{key:"componentDidMount",value:function(){this.getCityList()}}]),n}(h.Component);function N(t){var e=(0,y.s0)();return(0,g.jsx)(b,(0,r.Z)((0,r.Z)({},t),{},{navigate:e}))}},6059:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(2836)),i=u(n(5053)),a=u(n(2749)),c=u(n(4976)),o=u(n(2455)),s=u(n(1694)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2791));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},f=function(t){function e(){return(0,i.default)(this,e),(0,c.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,o.default)(e,t),(0,a.default)(e,[{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.className,i=t.children,a=t.mode,c=t.icon,o=t.onLeftClick,u=t.leftContent,f=t.rightContent,h=d(t,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return l.createElement("div",(0,r.default)({},h,{className:(0,s.default)(n,e,e+"-"+a)}),l.createElement("div",{className:e+"-left",role:"button",onClick:o},c?l.createElement("span",{className:e+"-left-icon","aria-hidden":"true"},c):null,u),l.createElement("div",{className:e+"-title"},i),l.createElement("div",{className:e+"-right"},f))}}]),e}(l.Component);e.default=f,f.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}},t.exports=e.default},331:function(t,e,n){n(6993),n(5764)},5764:function(t,e,n){n.r(e),e.default={}}}]);
//# sourceMappingURL=756.47567ae5.chunk.js.map