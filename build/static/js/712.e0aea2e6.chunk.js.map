{"version":3,"file":"static/js/712.e0aea2e6.chunk.js","mappings":"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","sources":["webpack://my-app/./src/components/HousePackage/index.module.css?e156","components/HousePackage/index.js","components/NavHeader/index.js","webpack://my-app/./src/pages/Rent/Add/index.module.css?6047","pages/Rent/Add/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"HousePackage_root__78u91\",\"item\":\"HousePackage_item__Jzz0M\",\"active\":\"HousePackage_active__P0MuF\",\"icon\":\"HousePackage_icon__RFQjn\"};","import React, { Component } from 'react'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 所有房屋配置项\r\nconst HOUSE_PACKAGE = [\r\n  {\r\n    id: 1,\r\n    name: '衣柜',\r\n    icon: 'icon-wardrobe'\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '洗衣机',\r\n    icon: 'icon-wash'\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '空调',\r\n    icon: 'icon-air'\r\n  },\r\n  {\r\n    id: 4,\r\n    name: '天然气',\r\n    icon: 'icon-gas'\r\n  },\r\n  {\r\n    id: 5,\r\n    name: '冰箱',\r\n    icon: 'icon-ref'\r\n  },\r\n  {\r\n    id: 6,\r\n    name: '暖气',\r\n    icon: 'icon-Heat'\r\n  },\r\n  {\r\n    id: 7,\r\n    name: '电视',\r\n    icon: 'icon-vid'\r\n  },\r\n  {\r\n    id: 8,\r\n    name: '热水器',\r\n    icon: 'icon-heater'\r\n  },\r\n  {\r\n    id: 9,\r\n    name: '宽带',\r\n    icon: 'icon-broadband'\r\n  },\r\n  {\r\n    id: 10,\r\n    name: '沙发',\r\n    icon: 'icon-sofa'\r\n  }\r\n]\r\n\r\n/* \r\n  该组件的两种功能：\r\n  1 根据传入的 list 展示房屋配置列表（房源详情页面）\r\n    <HousePackage list={['衣柜', '洗衣机']} />\r\n  2 从所有配置列表中选择房屋配置（发布房源页面）\r\n    <HousePackage select onSelect={selectedItems => {...}} />\r\n*/\r\nclass HousePackage extends Component {\r\n  state = {\r\n    // 选中名称\r\n    selectedNames: []\r\n  }\r\n\r\n  // 根据id切换选中状态\r\n  toggleSelect = name => {\r\n    const { selectedNames } = this.state\r\n    let newSelectedNames\r\n\r\n    // 判断该项是否选中\r\n    if (selectedNames.indexOf(name) > -1) {\r\n      // 选中：从数组中删除选中项，也就是保留未选中项\r\n      newSelectedNames = selectedNames.filter(item => item !== name)\r\n    } else {\r\n      // 未选中：添加到数组中\r\n      newSelectedNames = [...selectedNames, name]\r\n    }\r\n\r\n    // 传递给父组件\r\n    this.props.onSelect(newSelectedNames)\r\n\r\n    this.setState({\r\n      selectedNames: newSelectedNames\r\n    })\r\n  }\r\n\r\n  // 渲染列表项\r\n  renderItems() {\r\n    const { selectedNames } = this.state\r\n    // select 的值为 true 表示 选择房屋配置；false 表示仅展示房屋列表\r\n    // list 表示要展示的列表项\r\n    const { select, list } = this.props\r\n\r\n    let data\r\n    // 如果传了 select 表示：选择 房屋配置\r\n    // 如果没传 select 表示：展示 房屋配置 列表\r\n    if (select) {\r\n      data = HOUSE_PACKAGE\r\n    } else {\r\n      // 展示房屋配置列表\r\n      // 从所有的列表项中过滤出要展示的（list）列表项\r\n      data = HOUSE_PACKAGE.filter(v => list.includes(v.name))\r\n    }\r\n\r\n    return data.map(item => {\r\n      // 判断该项是否选中\r\n      const isSelected = selectedNames.indexOf(item.name) > -1\r\n\r\n      return (\r\n        <li\r\n          key={item.id}\r\n          className={[styles.item, isSelected ? styles.active : ''].join(' ')}\r\n          onClick={select && (() => this.toggleSelect(item.name))}\r\n        >\r\n          <p>\r\n            <i className={`iconfont ${item.icon} ${styles.icon}`} />\r\n          </p>\r\n          {item.name}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <ul className={styles.root}>{this.renderItems()}</ul>\r\n  }\r\n}\r\n\r\n// 属性默认值，防止在使用该组件时，不传 onSelect 报错\r\nHousePackage.defaultProps = {\r\n  onSelect: () => {}\r\n}\r\n\r\nexport default HousePackage\r\n","import React from 'react'\r\nimport { NavBar } from 'antd-mobile'\r\nimport { useNavigate } from 'react-router-dom'\r\n// 导入 props 校验的包\r\nimport PropTypes from 'prop-types'\r\n// 导入样式\r\nimport './index.css'\r\n\r\n// 添加 className 和 rightContent（导航栏右侧内容）属性\r\nfunction NavHeader({ children, onLeftClick, className, rightContent }) {\r\n  const navigate = useNavigate()\r\n  // 默认点击行为\r\n  const defaultHandle = () => navigate(-1)\r\n  return (\r\n    <NavBar\r\n      className={['navBar', className || ''].join(' ')}\r\n      mode=\"light\"\r\n      icon={<i className=\"iconfont icon-back\" />}\r\n      onLeftClick={onLeftClick || defaultHandle}\r\n      rightContent={rightContent}\r\n    >\r\n      {children}\r\n    </NavBar>\r\n  )\r\n}\r\n\r\n// 添加 props 校验\r\nNavHeader.propTypes = {\r\n  children: PropTypes.string.isRequired,\r\n  onLeftClick: PropTypes.func,\r\n  className: PropTypes.string,\r\n  rightContent: PropTypes.array,\r\n}\r\n\r\nexport default NavHeader\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Add_root__T8e62\",\"bottom\":\"Add_bottom__50nXW\",\"cancel\":\"Add_cancel__oOFmV\",\"imgpicker\":\"Add_imgpicker__KHVBg\",\"input\":\"Add_input__TdmtW\",\"label\":\"Add_label__Wq-mZ\",\"confirm\":\"Add_confirm__PKkps\",\"title\":\"Add_title__D3BuH\",\"pics\":\"Add_pics__eX2Hp\",\"supporting\":\"Add_supporting__rB53D\",\"desc\":\"Add_desc__l2qwP\"};","import React, { Component } from 'react'\r\n\r\nimport {\r\n  Flex,\r\n  List,\r\n  InputItem,\r\n  Picker,\r\n  ImagePicker,\r\n  TextareaItem,\r\n  Modal,\r\n  Toast,\r\n} from 'antd-mobile'\r\n\r\nimport { API } from '../../../utils'\r\n\r\nimport NavHeader from '../../../components/NavHeader'\r\nimport HousePackge from '../../../components/HousePackage'\r\n\r\nimport styles from './index.module.css'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\n\r\nconst alert = Modal.alert\r\n\r\n// 房屋类型\r\nconst roomTypeData = [\r\n  { label: '一室', value: 'ROOM|d4a692e4-a177-37fd' },\r\n  { label: '二室', value: 'ROOM|d1a00384-5801-d5cd' },\r\n  { label: '三室', value: 'ROOM|20903ae0-c7bc-f2e2' },\r\n  { label: '四室', value: 'ROOM|ce2a5daa-811d-2f49' },\r\n  { label: '四室+', value: 'ROOM|2731c38c-5b19-ff7f' },\r\n]\r\n\r\n// 朝向：\r\nconst orientedData = [\r\n  { label: '东', value: 'ORIEN|141b98bf-1ad0-11e3' },\r\n  { label: '西', value: 'ORIEN|103fb3aa-e8b4-de0e' },\r\n  { label: '南', value: 'ORIEN|61e99445-e95e-7f37' },\r\n  { label: '北', value: 'ORIEN|caa6f80b-b764-c2df' },\r\n  { label: '东南', value: 'ORIEN|dfb1b36b-e0d1-0977' },\r\n  { label: '东北', value: 'ORIEN|67ac2205-7e0f-c057' },\r\n  { label: '西南', value: 'ORIEN|2354e89e-3918-9cef' },\r\n  { label: '西北', value: 'ORIEN|80795f1a-e32f-feb9' },\r\n]\r\n\r\n// 楼层\r\nconst floorData = [\r\n  { label: '高楼层', value: 'FLOOR|1' },\r\n  { label: '中楼层', value: 'FLOOR|2' },\r\n  { label: '低楼层', value: 'FLOOR|3' },\r\n]\r\n\r\nclass RentAdd extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const { state } = props.location\r\n    const community = {\r\n      name: '',\r\n      id: '',\r\n    }\r\n\r\n    if (state) {\r\n      // 有小区信息数据，存储到状态中\r\n      community.name = state.name\r\n      community.id = state.id\r\n    }\r\n\r\n    this.state = {\r\n      // 临时图片地址\r\n      tempSlides: [],\r\n\r\n      // 小区的名称和id\r\n      community,\r\n      // 价格\r\n      price: '',\r\n      // 面积\r\n      size: '',\r\n      // 房屋类型\r\n      roomType: '',\r\n      // 楼层\r\n      floor: '',\r\n      // 朝向：\r\n      oriented: '',\r\n      // 房屋标题\r\n      title: '',\r\n      // 房屋图片\r\n      houseImg: '',\r\n      // 房屋配套：\r\n      supporting: '',\r\n      // 房屋描述\r\n      description: '',\r\n    }\r\n  }\r\n\r\n  // 取消编辑，返回上一页\r\n  onCancel = () => {\r\n    alert('提示', '放弃发布房源?', [\r\n      {\r\n        text: '放弃',\r\n        onPress: async () => this.props.navigate(-1),\r\n      },\r\n      {\r\n        text: '继续编辑',\r\n      },\r\n    ])\r\n  }\r\n\r\n  /* \r\n    获取表单数据：\r\n  */\r\n  getValue = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  /* \r\n    获取房屋配置数据：\r\n  */\r\n  handleSupporting = (selected) => {\r\n    // console.log(selected)\r\n    this.setState({\r\n      supporting: selected.join('|'),\r\n    })\r\n  }\r\n\r\n  /* \r\n    获取房屋图片：\r\n\r\n    1 给 ImagePicker 组件添加 onChange 配置项。\r\n    2 通过 onChange 的参数，获取到上传的图片，并存储到状态 tempSlides 中。\r\n  */\r\n  handleHouseImg = (files, type, index) => {\r\n    // console.log(files, type, index)\r\n    this.setState({\r\n      tempSlides: files,\r\n    })\r\n  }\r\n\r\n  /* \r\n    发布房源：\r\n\r\n    1 在 addHouse 方法中，从 state 里面获取到所有房屋数据。\r\n    2 使用 API 调用发布房源接口，传递所有房屋数据。\r\n    3 根据接口返回值中的状态码，判断是否发布成功。\r\n    4 如果状态码是 200，表示发布成功，就提示：发布成功，并跳转到已发布房源页面。\r\n    5 否则，就提示：服务器偷懒了，请稍后再试~。\r\n  */\r\n  addHouse = async () => {\r\n    const {\r\n      tempSlides,\r\n      title,\r\n      description,\r\n      oriented,\r\n      supporting,\r\n      price,\r\n      roomType,\r\n      size,\r\n      floor,\r\n      community,\r\n    } = this.state\r\n    let houseImg = ''\r\n\r\n    // 上传房屋图片：\r\n    if (tempSlides.length > 0) {\r\n      // 已经有上传的图片了\r\n      const form = new FormData()\r\n      tempSlides.forEach((item) => form.append('file', item.file))\r\n\r\n      const res = await API.post('/houses/image', form, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      })\r\n\r\n      houseImg = res.data.body.join('|')\r\n      // console.log(houseImg)\r\n    }\r\n\r\n    // 发布房源\r\n    const res = await API.post('/user/houses', {\r\n      title,\r\n      description,\r\n      oriented,\r\n      supporting,\r\n      price,\r\n      roomType,\r\n      size,\r\n      floor,\r\n      community: community.id,\r\n      houseImg,\r\n    })\r\n\r\n    console.log(res)\r\n    if (res.data.status === 200) {\r\n      // 发布成功\r\n      Toast.info('发布成功', 1, null, false)\r\n      this.props.navigate('/rent')\r\n    } else {\r\n      Toast.info('服务器偷懒了，请稍后再试~', 2, null, false)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const Item = List.Item\r\n    const { navigate } = this.props\r\n    const {\r\n      community,\r\n      price,\r\n      roomType,\r\n      floor,\r\n      oriented,\r\n      description,\r\n      tempSlides,\r\n      title,\r\n      size,\r\n    } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavHeader onLeftClick={this.onCancel}>发布房源</NavHeader>\r\n\r\n        {/* 房源信息 */}\r\n        <List\r\n          className={styles.header}\r\n          renderHeader={() => '房源信息'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          {/* 选择所在小区 */}\r\n          <Item\r\n            extra={community.name || '请输入小区名称'}\r\n            arrow=\"horizontal\"\r\n            onClick={() => navigate('/rent/search', { replace: true })}\r\n          >\r\n            小区名称\r\n          </Item>\r\n          {/* 相当于 form 表单的 input 元素 */}\r\n          <InputItem\r\n            placeholder=\"请输入租金/月\"\r\n            extra=\"￥/月\"\r\n            value={price}\r\n            onChange={(val) => this.getValue('price', val)}\r\n          >\r\n            租&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金\r\n          </InputItem>\r\n          <InputItem\r\n            placeholder=\"请输入建筑面积\"\r\n            extra=\"㎡\"\r\n            value={size}\r\n            onChange={(val) => this.getValue('size', val)}\r\n          >\r\n            建筑面积\r\n          </InputItem>\r\n          <Picker\r\n            data={roomTypeData}\r\n            value={[roomType]}\r\n            cols={1}\r\n            onChange={(val) => this.getValue('roomType', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型</Item>\r\n          </Picker>\r\n\r\n          <Picker\r\n            data={floorData}\r\n            value={[floor]}\r\n            cols={1}\r\n            onChange={(val) => this.getValue('floor', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">所在楼层</Item>\r\n          </Picker>\r\n          <Picker\r\n            data={orientedData}\r\n            value={[oriented]}\r\n            cols={1}\r\n            onChange={(val) => this.getValue('oriented', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向</Item>\r\n          </Picker>\r\n        </List>\r\n\r\n        {/* 房屋标题 */}\r\n        <List\r\n          className={styles.title}\r\n          renderHeader={() => '房屋标题'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <InputItem\r\n            placeholder=\"请输入标题（例如：整租 小区名 2室 5000元）\"\r\n            value={title}\r\n            onChange={(val) => this.getValue('title', val)}\r\n          />\r\n        </List>\r\n\r\n        {/* 房屋图像 */}\r\n        <List\r\n          className={styles.pics}\r\n          renderHeader={() => '房屋图像'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <ImagePicker\r\n            files={tempSlides}\r\n            onChange={this.handleHouseImg}\r\n            multiple={true}\r\n            className={styles.imgpicker}\r\n          />\r\n        </List>\r\n\r\n        {/* 房屋配置 */}\r\n        <List\r\n          className={styles.supporting}\r\n          renderHeader={() => '房屋配置'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <HousePackge select onSelect={this.handleSupporting} />\r\n        </List>\r\n\r\n        {/* 房屋描述 */}\r\n        <List\r\n          className={styles.desc}\r\n          renderHeader={() => '房屋描述'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <TextareaItem\r\n            rows={5}\r\n            placeholder=\"请输入房屋描述信息\"\r\n            value={description}\r\n            onChange={(val) => this.getValue('description', val)}\r\n          />\r\n        </List>\r\n\r\n        <Flex className={styles.bottom}>\r\n          <Flex.Item className={styles.cancel} onClick={this.onCancel}>\r\n            取消\r\n          </Flex.Item>\r\n          <Flex.Item className={styles.confirm} onClick={this.addHouse}>\r\n            提交\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default function History(props) {\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  return <RentAdd {...props} navigate={navigate} location={location} />\r\n}\r\n"],"names":["HOUSE_PACKAGE","id","name","icon","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","indexOf","filter","item","props","onSelect","setState","this","select","list","v","includes","map","isSelected","className","styles","join","onClick","renderItems","Component","defaultProps","children","onLeftClick","rightContent","navigate","useNavigate","mode","alert","roomTypeData","label","value","orientedData","floorData","RentAdd","onCancel","text","onPress","getValue","handleSupporting","selected","supporting","handleHouseImg","files","type","index","tempSlides","addHouse","title","description","oriented","price","roomType","size","floor","community","houseImg","length","form","FormData","forEach","append","file","API","headers","res","data","body","console","log","status","location","Item","NavHeader","renderHeader","extra","arrow","replace","placeholder","onChange","val","cols","multiple","rows","History","useLocation"],"sourceRoot":""}